<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tracking & Admin Resi</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Bebas+Neue&family=Inter:wght@400;500;600;700&display=swap');
        body {
            font-family: 'Inter', sans-serif;
            background: linear-gradient(to bottom right, #f8fafc, #e2e8f0);
        }
        /* Styling untuk Timeline */
        .tracking-status-item {
            display: flex;
            align-items: flex-start;
            position: relative;
            padding-bottom: 2rem;
            margin-left: 1rem;
        }
        .tracking-status-item:not(:last-child)::before {
            content: '';
            position: absolute;
            top: 1.25rem;
            left: 0.625rem;
            width: 2px;
            height: calc(100% - 1.5rem);
            background-color: #d1d5db;
        }
        .status-icon {
            flex-shrink: 0;
            width: 1.5rem;
            height: 1.5rem;
            border-radius: 50%;
            background-color: #d1d5db;
            color: #fff;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1rem;
            font-weight: bold;
            z-index: 10;
            position: absolute;
            left: 0;
            top: 0;
        }
        .animate-fade-in {
            animation: fadeIn 0.5s ease-in-out;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .header-title {
            font-family: 'Bebas Neue', cursive;
            background-color: #ef4444; 
            color: white;
            padding: 1rem;
            border-radius: 1.5rem;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
            letter-spacing: 2px;
        }
        .content-container {
            min-height: 70vh;
        }
    </style>
</head>
<body class="bg-gray-50 min-h-screen flex items-center justify-center p-4">

    <!-- Main Container -->
    <div class="bg-white rounded-3xl shadow-xl p-8 w-full max-w-4xl transition-all duration-300 relative content-container">
        
        <!-- Toggle Button untuk Admin -->
        <button id="toggleAdminBtn" class="absolute top-4 right-4 bg-gray-200 text-gray-700 py-1 px-3 rounded-lg text-xs font-semibold hover:bg-gray-300 transition-colors duration-200">
            Buka Admin
        </button>

        <!-- --- MODE PELACAKAN (PUBLIK) --- -->
        <div id="publicView">
            <div class="header-title mb-8">
                <h1 class="text-4xl font-bold text-center">TRACKING PAKET</h1>
            </div>

            <p class="text-center text-gray-500 mb-8">Masukkan nomor resi untuk melacak kiriman Anda.</p>
        
            <!-- Formulir Pelacakan Resi -->
            <form id="trackingForm" class="flex flex-col md:flex-row gap-4 mb-8 max-w-lg mx-auto">
                <input type="text" id="trackingInput" placeholder="Masukkan nomor resi Anda"
                       class="flex-1 px-6 py-3 border border-gray-300 rounded-full shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500">
                <button type="submit"
                        class="bg-blue-600 text-white font-semibold px-6 py-3 rounded-full shadow-md hover:bg-blue-700 transition-colors duration-200">
                    Lacak
                </button>
            </form>
        
            <!-- Hasil Pelacakan -->
            <div id="trackingResult" class="hidden animate-fade-in max-w-2xl mx-auto">
                <div class="bg-white rounded-2xl shadow-lg p-6 mb-8 border border-gray-200">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div>
                            <p class="text-sm font-medium text-gray-500">Nama Pelanggan:</p>
                            <p id="resultCustomerName" class="font-semibold text-gray-800"></p>
                        </div>
                        <div>
                            <p class="text-sm font-medium text-gray-500">Nomor Resi:</p>
                            <p id="resultTrackingNumber" class="font-semibold text-gray-800"></p>
                        </div>
                        <div>
                            <p class="text-sm font-medium text-gray-500">Jasa Pengiriman:</p>
                            <p id="resultCourierService" class="font-semibold text-gray-800"></p>
                        </div>
                        <div>
                            <p class="text-sm font-medium text-gray-500">Status Terakhir:</p>
                            <p id="resultStatus" class="font-semibold text-green-600"></p>
                        </div>
                    </div>
                    
                    <hr class="my-6">
                    
                    <!-- Alamat Pengirim dan Penerima -->
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div>
                            <h3 class="text-lg font-semibold text-gray-700 mb-2">Pengirim</h3>
                            <p id="resultSenderAddress" class="text-gray-600 text-sm"></p>
                        </div>
                        <div>
                            <h3 class="text-lg font-semibold text-gray-700 mb-2">Penerima</h3>
                            <p id="resultReceiverAddress" class="text-gray-600 text-sm"></p>
                        </div>
                    </div>

                    <!-- Riwayat Pelacakan -->
                    <h3 class="text-xl font-semibold text-gray-700 mt-8 mb-4">Riwayat Pelacakan</h3>
                    <div id="trackingTimeline" class="relative pl-4">
                        <!-- Riwayat akan diisi oleh JS -->
                    </div>
                </div>
            </div>
            
            <p id="errorMessage" class="hidden text-center text-red-500 mt-4">Nomor resi tidak ditemukan. Mohon periksa kembali.</p>
        </div>

        <!-- --- MODE ADMIN (PRIVAT) --- -->
        <div id="adminView" class="hidden">
            <!-- Login Form -->
            <div id="loginFormContainer" class="max-w-xs mx-auto text-center">
                <h2 class="text-2xl font-bold text-gray-800 mb-4">Login Admin</h2>
                <input type="password" id="adminPassword" placeholder="Masukkan kata sandi"
                       class="w-full px-4 py-2 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 mb-4">
                <button id="loginBtn" class="w-full bg-blue-600 text-white font-semibold py-2 rounded-lg shadow-md hover:bg-blue-700 transition-colors duration-200">
                    Masuk
                </button>
                <p id="loginError" class="text-red-500 text-sm mt-2 hidden">Kata sandi salah.</p>
            </div>
            
            <!-- Admin Panel Content -->
            <div id="adminPanelContent" class="hidden">
                <button id="logoutBtn" class="absolute top-4 right-4 bg-red-500 text-white py-1 px-3 rounded-full text-xs font-semibold hover:bg-red-600 transition-colors duration-200">
                    Keluar
                </button>
                <h1 class="text-3xl font-bold text-center text-gray-800 mb-6">Panel Admin</h1>
                <p class="text-center text-gray-500 mb-8">Kelola dan perbarui status pengiriman</p>
        
                <!-- Formulir Tambah Resi -->
                <div class="bg-gray-50 p-6 rounded-2xl border border-gray-200 mb-8">
                    <h2 class="text-2xl font-semibold text-gray-700 mb-4">Tambahkan Resi Baru</h2>
                    <form id="addTrackingForm" class="space-y-4">
                        <!-- Input fields for new tracking number -->
                        <div>
                            <label for="addCustomerName" class="block text-sm font-medium text-gray-700">Nama Pelanggan</label>
                            <input type="text" id="addCustomerName" placeholder="Masukkan nama pelanggan" class="mt-1 block w-full px-4 py-2 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500" required>
                        </div>
                        <div>
                            <label for="addTrackingNumber" class="block text-sm font-medium text-gray-700">Nomor Resi</label>
                            <input type="text" id="addTrackingNumber" placeholder="Masukkan nomor resi" class="mt-1 block w-full px-4 py-2 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500" required>
                        </div>
                        <div class="space-y-2">
                            <h3 class="font-medium text-gray-700">Alamat Pengirim</h3>
                            <input type="text" id="senderAddress" placeholder="Alamat lengkap" class="mt-1 block w-full px-4 py-2 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500" required>
                            <input type="text" id="senderCity" placeholder="Kota" class="mt-1 block w-full px-4 py-2 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500" required>
                            <input type="text" id="senderPostalCode" placeholder="Kode Pos" class="mt-1 block w-full px-4 py-2 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500" required>
                        </div>
                        <div class="space-y-2">
                            <h3 class="font-medium text-gray-700">Alamat Penerima</h3>
                            <input type="text" id="receiverAddress" placeholder="Alamat lengkap" class="mt-1 block w-full px-4 py-2 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500" required>
                            <input type="text" id="receiverCity" placeholder="Kota" class="mt-1 block w-full px-4 py-2 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500" required>
                            <input type="text" id="receiverPostalCode" placeholder="Kode Pos" class="mt-1 block w-full px-4 py-2 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500" required>
                        </div>
                        <div>
                            <label for="courierService" class="block text-sm font-medium text-gray-700">Jasa Pengiriman</label>
                            <select id="courierService" class="mt-1 block w-full px-4 py-2 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500" required>
                                <option value="JNT">JNT</option>
                                <option value="JNT EXPRESS">JNT EXPRESS</option>
                                <option value="JNE">JNE</option>
                                <option value="INDAH CARGO">INDAH CARGO</option>
                            </select>
                        </div>
                        <button type="submit" class="w-full bg-blue-600 text-white font-semibold py-3 rounded-lg shadow-md hover:bg-blue-700 transition-colors duration-200">
                            Simpan Resi
                        </button>
                    </form>
                </div>
        
                <!-- Tabel Riwayat Resi -->
                <div class="bg-white p-6 rounded-2xl border border-gray-200">
                    <h2 class="text-2xl font-semibold text-gray-700 mb-4">Daftar Resi</h2>
                    <div class="overflow-x-auto">
                        <table class="min-w-full divide-y divide-gray-200">
                            <thead class="bg-gray-50">
                                <tr>
                                    <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider rounded-tl-lg">Nama Pelanggan</th>
                                    <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Nomor Resi</th>
                                    <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Jasa Pengiriman</th>
                                    <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Aksi</th>
                                </tr>
                            </thead>
                            <tbody id="trackingTableBody" class="bg-white divide-y divide-gray-200">
                                <!-- Data will be populated by JS -->
                            </tbody>
                        </table>
                    </div>
                    <p id="noDataMessage" class="mt-4 text-center text-gray-500 hidden">Belum ada data resi.</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal for Detail Resi and Update -->
    <div id="modal" class="fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full hidden z-50">
        <div class="relative top-20 mx-auto p-5 border w-11/12 md:w-3/4 lg:w-1/2 shadow-lg rounded-2xl bg-white">
            <h3 class="text-2xl font-semibold text-gray-700 mb-4">Detail Resi</h3>
            <div id="modalContent" class="space-y-4">
                <p><strong>Nama Pelanggan:</strong> <span id="modalCustomerName"></span></p>
                <p><strong>Nomor Resi:</strong> <span id="modalTrackingNumber"></span></p>
                <p><strong>Jasa Pengiriman:</strong> <span id="modalCourierService"></span></p>
                
                <h4 class="font-semibold mt-4">Alamat Pengirim</h4>
                <p id="modalSenderAddress" class="text-gray-600 text-sm"></p>
                
                <h4 class="font-semibold mt-4">Alamat Penerima</h4>
                <p id="modalReceiverAddress" class="text-gray-600 text-sm"></p>

                <h4 class="text-xl font-semibold text-gray-700 mt-6">Tambahkan Riwayat</h4>
                <form id="updateTrackingForm" class="space-y-4">
                    <div>
                        <label for="updateStatus" class="block text-sm font-medium text-gray-700">Status</label>
                        <select id="updateStatus" class="mt-1 block w-full px-4 py-2 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500" required>
                            <option value="Pesanan Dikonfirmasi">Pesanan Dikonfirmasi</option>
                            <option value="Paket Siap Dikirim">Paket Siap Dikirim</option>
                            <option value="Dalam Perjalanan">Dalam Perjalanan</option>
                            <option value="Sampai di Pusat Sortir">Sampai di Pusat Sortir</option>
                            <option value="Kurir Menuju Lokasi">Kurir Menuju Lokasi</option>
                            <option value="Telah Diterima oleh Penerima">Telah Diterima oleh Penerima</option>
                        </select>
                    </div>
                    <div>
                        <label for="updateLocation" class="block text-sm font-medium text-gray-700">Lokasi</label>
                        <input type="text" id="updateLocation" placeholder="Masukkan lokasi saat ini" class="mt-1 block w-full px-4 py-2 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500" required>
                    </div>
                    <button type="submit" class="w-full bg-blue-600 text-white font-semibold py-3 rounded-lg shadow-md hover:bg-blue-700 transition-colors duration-200">
                        Perbarui Resi
                    </button>
                </form>

                <h4 class="text-xl font-semibold text-gray-700 mt-6">Riwayat Pelacakan</h4>
                <div id="modalTrackingTimeline" class="relative pl-4">
                    <!-- Riwayat will be populated by JS -->
                </div>
            </div>

            <div class="mt-8 text-center">
                <button id="closeModal" class="bg-gray-200 text-gray-700 font-semibold py-2 px-4 rounded-lg shadow-md hover:bg-gray-300 transition-colors duration-200">
                    Tutup
                </button>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // UI Elements
            const publicView = document.getElementById('publicView');
            const adminView = document.getElementById('adminView');
            const toggleAdminBtn = document.getElementById('toggleAdminBtn');
            
            const loginFormContainer = document.getElementById('loginFormContainer');
            const adminPanelContent = document.getElementById('adminPanelContent');
            const adminPasswordInput = document.getElementById('adminPassword');
            const loginBtn = document.getElementById('loginBtn');
            const logoutBtn = document.getElementById('logoutBtn');
            const loginError = document.getElementById('loginError');

            const addForm = document.getElementById('addTrackingForm');
            const updateForm = document.getElementById('updateTrackingForm');
            const tableBody = document.getElementById('trackingTableBody');
            const noDataMessage = document.getElementById('noDataMessage');
            const modal = document.getElementById('modal');
            const closeModalBtn = document.getElementById('closeModal');
            
            // Public tracking elements
            const trackingForm = document.getElementById('trackingForm');
            const trackingInput = document.getElementById('trackingInput');
            const trackingResult = document.getElementById('trackingResult');
            const errorMessage = document.getElementById('errorMessage');

            // Shared Data and State
            let trackingData = [];
            let currentTrackingNumber = null;
            const ADMIN_PASSWORD = 'admin123';
            let isAdminLoggedIn = false;

            // --- Data Management ---
            const saveData = () => {
                localStorage.setItem('trackingData', JSON.stringify(trackingData));
            };

            const loadData = () => {
                const storedData = localStorage.getItem('trackingData');
                if (storedData) {
                    trackingData = JSON.parse(storedData);
                }
            };

            // --- UI Render Functions ---

            // Renders the timeline for both public view and admin modal
            const renderTimeline = (history, targetElementId, isAdmin) => {
                const targetElement = document.getElementById(targetElementId);
                targetElement.innerHTML = '';
                if (history && history.length > 0) {
                    history.sort((a, b) => new Date(b.timestamp) - new Date(a.timestamp));
                    history.forEach((item, index) => {
                        const div = document.createElement('div');
                        div.className = `tracking-status-item`;
                        const iconClass = isAdmin ? 'bg-gray-400' : 'bg-blue-500';
                        div.innerHTML = `
                            <div class="status-icon ${iconClass}">${isAdmin ? '' : history.length - index}</div>
                            <div class="status-content pl-6">
                                <h4 class="font-semibold text-gray-800">${item.status}</h4>
                                <p class="text-gray-500 text-sm">${item.location}</p>
                                <p class="text-gray-400 text-xs mt-1">${new Date(item.timestamp).toLocaleString()}</p>
                            </div>
                        `;
                        targetElement.appendChild(div);
                    });
                } else {
                    targetElement.innerHTML = '<p class="text-gray-500 text-sm pl-4">Belum ada riwayat pelacakan.</p>';
                }
            };

            const renderAdminTable = () => {
                tableBody.innerHTML = '';
                if (trackingData.length === 0) {
                    noDataMessage.classList.remove('hidden');
                } else {
                    noDataMessage.classList.add('hidden');
                    trackingData.forEach(item => {
                        const row = document.createElement('tr');
                        row.innerHTML = `
                            <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">${item.customerName}</td>
                            <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">${item.trackingNumber}</td>
                            <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">${item.courierService}</td>
                            <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                                <button class="view-details-btn bg-blue-500 hover:bg-blue-600 text-white py-1 px-3 rounded-lg text-xs font-semibold" data-tracking-number="${item.trackingNumber}">
                                    Lihat & Perbarui
                                </button>
                            </td>
                        `;
                        tableBody.appendChild(row);
                    });
                }
            };

            // --- Logic Handler ---

            // Admin Panel State Toggler
            const setAdminMode = (isEnteringAdminMode) => {
                if (isEnteringAdminMode) {
                    publicView.classList.add('hidden');
                    adminView.classList.remove('hidden');
                    toggleAdminBtn.textContent = 'Buka Pelacakan';
                } else {
                    publicView.classList.remove('hidden');
                    adminView.classList.add('hidden');
                    toggleAdminBtn.textContent = 'Buka Admin';
                }
            };
            
            // Initial view state is public
            setAdminMode(false); 

            // Handle Admin Login/Logout/Toggle
            toggleAdminBtn.addEventListener('click', () => {
                if (publicView.classList.contains('hidden')) {
                    // Currently in Admin view, switch to Public
                    setAdminMode(false);
                } else {
                    // Currently in Public view, switch to Admin
                    setAdminMode(true);
                }
            });

            loginBtn.addEventListener('click', () => {
                const password = adminPasswordInput.value;
                if (password === ADMIN_PASSWORD) {
                    isAdminLoggedIn = true;
                    loginFormContainer.classList.add('hidden');
                    adminPanelContent.classList.remove('hidden');
                    renderAdminTable();
                    loginError.classList.add('hidden');
                } else {
                    loginError.classList.remove('hidden');
                }
            });

            logoutBtn.addEventListener('click', () => {
                isAdminLoggedIn = false;
                adminPanelContent.classList.add('hidden');
                loginFormContainer.classList.remove('hidden');
                adminPasswordInput.value = '';
                loginError.classList.add('hidden');
            });


            // Handle Public Tracking Form Submission
            trackingForm.addEventListener('submit', (event) => {
                event.preventDefault();
                const trackingNumber = trackingInput.value.trim();
                const result = trackingData.find(item => item.trackingNumber === trackingNumber);

                if (result) {
                    errorMessage.classList.add('hidden');
                    trackingResult.classList.remove('hidden');

                    // Fill public result fields
                    document.getElementById('resultCustomerName').textContent = result.customerName;
                    document.getElementById('resultTrackingNumber').textContent = result.trackingNumber;
                    document.getElementById('resultCourierService').textContent = result.courierService;
                    document.getElementById('resultSenderAddress').innerHTML = `${result.senderAddress}<br>${result.senderCity}, ${result.senderPostalCode}`;
                    document.getElementById('resultReceiverAddress').innerHTML = `${result.receiverAddress}<br>${result.receiverCity}, ${result.receiverPostalCode}`;

                    const statusElement = document.getElementById('resultStatus');
                    if (result.history.length > 0) {
                        const latestStatus = result.history[result.history.length - 1].status;
                        statusElement.textContent = latestStatus;
                        statusElement.className = 'font-semibold ' + (latestStatus === 'Telah Diterima oleh Penerima' ? 'text-green-600' : 'text-orange-500');
                    } else {
                        statusElement.textContent = 'Pesanan Dikonfirmasi';
                        statusElement.className = 'font-semibold text-gray-500';
                    }

                    renderTimeline(result.history, 'trackingTimeline', false);
                } else {
                    trackingResult.classList.add('hidden');
                    errorMessage.classList.remove('hidden');
                }
            });

            // Handle Add New Tracking Number Form Submission (Admin)
            addForm.addEventListener('submit', (event) => {
                event.preventDefault();
                const trackingNumber = document.getElementById('addTrackingNumber').value;
                
                const existingItem = trackingData.find(item => item.trackingNumber === trackingNumber);
                if (existingItem) {
                    alert('Nomor resi sudah ada!');
                    return;
                }

                const newTracking = {
                    customerName: document.getElementById('addCustomerName').value,
                    trackingNumber: trackingNumber,
                    senderAddress: document.getElementById('senderAddress').value,
                    senderCity: document.getElementById('senderCity').value,
                    senderPostalCode: document.getElementById('senderPostalCode').value,
                    receiverAddress: document.getElementById('receiverAddress').value,
                    receiverCity: document.getElementById('receiverCity').value,
                    receiverPostalCode: document.getElementById('receiverPostalCode').value,
                    courierService: document.getElementById('courierService').value,
                    history: []
                };

                trackingData.push(newTracking);
                saveData();
                renderAdminTable();
                addForm.reset();
            });

            // Handle Update Tracking Form Submission (Admin Modal)
            updateForm.addEventListener('submit', (event) => {
                event.preventDefault();
                const status = document.getElementById('updateStatus').value;
                const location = document.getElementById('updateLocation').value;

                const item = trackingData.find(d => d.trackingNumber === currentTrackingNumber);
                if (item) {
                    const newHistoryItem = {
                        status,
                        location,
                        timestamp: new Date().toISOString()
                    };
                    item.history.push(newHistoryItem);
                    saveData();
                    // Re-render modal timeline
                    renderTimeline(item.history, 'modalTrackingTimeline', true);
                    updateForm.reset();
                }
            });

            // Handle View Details button click (Admin Table)
            document.addEventListener('click', (event) => {
                if (event.target.classList.contains('view-details-btn')) {
                    const trackingNumber = event.target.dataset.trackingNumber;
                    currentTrackingNumber = trackingNumber;
                    const item = trackingData.find(d => d.trackingNumber === trackingNumber);
                    if (item) {
                        // Fill modal fields
                        document.getElementById('modalCustomerName').textContent = item.customerName;
                        document.getElementById('modalTrackingNumber').textContent = item.trackingNumber;
                        document.getElementById('modalCourierService').textContent = item.courierService;
                        document.getElementById('modalSenderAddress').innerHTML = `${item.senderAddress}, ${item.senderCity}, ${item.senderPostalCode}`;
                        document.getElementById('modalReceiverAddress').innerHTML = `${item.receiverAddress}, ${item.receiverCity}, ${item.receiverPostalCode}`;
                        
                        renderTimeline(item.history, 'modalTrackingTimeline', true);
                        modal.classList.remove('hidden');
                    }
                }
            });

            closeModalBtn.addEventListener('click', () => {
                modal.classList.add('hidden');
            });

            // Initial Data Load
            loadData();
        });
    </script>
</body>
</html>
